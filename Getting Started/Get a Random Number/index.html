<!doctype html>
<html lang="en" dir="ltr" class="docs-wrapper docs-doc-page docs-version-current plugin-docs plugin-id-default docs-doc-id-Getting Started/Get a Random Number">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.18">
<title data-rh="true">Get a Random Number | RealRan Docs</title><meta data-rh="true" name="twitter:card" content="summary_large_image"><meta data-rh="true" property="og:url" content="https://realran.github.io/Docs/Getting Started/Get a Random Number"><meta data-rh="true" name="docusaurus_locale" content="en"><meta data-rh="true" name="docsearch:language" content="en"><meta data-rh="true" name="docusaurus_version" content="current"><meta data-rh="true" name="docusaurus_tag" content="docs-default-current"><meta data-rh="true" name="docsearch:version" content="current"><meta data-rh="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-rh="true" property="og:title" content="Get a Random Number | RealRan Docs"><meta data-rh="true" name="description" content="Introduction"><meta data-rh="true" property="og:description" content="Introduction"><link data-rh="true" rel="icon" href="/Docs/img/logo.png"><link data-rh="true" rel="canonical" href="https://realran.github.io/Docs/Getting Started/Get a Random Number"><link data-rh="true" rel="alternate" href="https://realran.github.io/Docs/Getting Started/Get a Random Number" hreflang="en"><link data-rh="true" rel="alternate" href="https://realran.github.io/Docs/Getting Started/Get a Random Number" hreflang="x-default"><link rel="stylesheet" href="/Docs/assets/css/styles.6c340478.css">
<link rel="preload" href="/Docs/assets/js/runtime~main.c1293670.js" as="script">
<link rel="preload" href="/Docs/assets/js/main.1d2ab322.js" as="script">
</head>
<body class="navigation-with-keyboard">
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div role="region"><a href="#" class="skipToContent_ZgBM">Skip to main content</a></div><nav class="navbar navbar--fixed-top navbarHideable_ObN2"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/Docs/"><div class="navbar__logo"><img src="/Docs/img/logo.png" alt="RealRan Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/Docs/img/logo.png" alt="RealRan Logo" class="themedImage_W2Cr themedImage--dark_oUvU"></div><b class="navbar__title">RealRan</b></a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/realran/Docs" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a><div class="toggle_S7eR colorModeToggle_vKtC"><button class="clean-btn toggleButton_rCf9 toggleButtonDisabled_Pu9x" type="button" disabled="" title="Switch between dark and light mode (currently light mode)" aria-label="Switch between dark and light mode (currently light mode)"><svg viewBox="0 0 24 24" width="24" height="24" class="lightToggleIcon_v35p"><path fill="currentColor" d="M12,9c1.65,0,3,1.35,3,3s-1.35,3-3,3s-3-1.35-3-3S10.35,9,12,9 M12,7c-2.76,0-5,2.24-5,5s2.24,5,5,5s5-2.24,5-5 S14.76,7,12,7L12,7z M2,13l2,0c0.55,0,1-0.45,1-1s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S1.45,13,2,13z M20,13l2,0c0.55,0,1-0.45,1-1 s-0.45-1-1-1l-2,0c-0.55,0-1,0.45-1,1S19.45,13,20,13z M11,2v2c0,0.55,0.45,1,1,1s1-0.45,1-1V2c0-0.55-0.45-1-1-1S11,1.45,11,2z M11,20v2c0,0.55,0.45,1,1,1s1-0.45,1-1v-2c0-0.55-0.45-1-1-1C11.45,19,11,19.45,11,20z M5.99,4.58c-0.39-0.39-1.03-0.39-1.41,0 c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0s0.39-1.03,0-1.41L5.99,4.58z M18.36,16.95 c-0.39-0.39-1.03-0.39-1.41,0c-0.39,0.39-0.39,1.03,0,1.41l1.06,1.06c0.39,0.39,1.03,0.39,1.41,0c0.39-0.39,0.39-1.03,0-1.41 L18.36,16.95z M19.42,5.99c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06c-0.39,0.39-0.39,1.03,0,1.41 s1.03,0.39,1.41,0L19.42,5.99z M7.05,18.36c0.39-0.39,0.39-1.03,0-1.41c-0.39-0.39-1.03-0.39-1.41,0l-1.06,1.06 c-0.39,0.39-0.39,1.03,0,1.41s1.03,0.39,1.41,0L7.05,18.36z"></path></svg><svg viewBox="0 0 24 24" width="24" height="24" class="darkToggleIcon_nQuB"><path fill="currentColor" d="M9.37,5.51C9.19,6.15,9.1,6.82,9.1,7.5c0,4.08,3.32,7.4,7.4,7.4c0.68,0,1.35-0.09,1.99-0.27C17.45,17.19,14.93,19,12,19 c-3.86,0-7-3.14-7-7C5,9.07,6.81,6.55,9.37,5.51z M12,3c-4.97,0-9,4.03-9,9s4.03,9,9,9s9-4.03,9-9c0-0.46-0.04-0.92-0.1-1.36 c-0.98,1.37-2.58,2.26-4.4,2.26c-2.98,0-5.4-2.42-5.4-5.4c0-1.81,0.89-3.42,2.26-4.4C12.92,3.04,12.46,3,12,3L12,3z"></path></svg></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div></nav><div class="main-wrapper"><div class="docPage_P2Lg"><button aria-label="Scroll back to top" class="clean-btn theme-back-to-top-button backToTopButton_RiI4" type="button"></button><aside class="theme-doc-sidebar-container docSidebarContainer_rKC_"><div class="sidebar_RiAD sidebarWithHideableNavbar_d0QC"><a tabindex="-1" class="sidebarLogo_YUvz" href="/Docs/"><img src="/Docs/img/logo.png" alt="RealRan Logo" class="themedImage_W2Cr themedImage--light_TfLj"><img src="/Docs/img/logo.png" alt="RealRan Logo" class="themedImage_W2Cr themedImage--dark_oUvU"><b>RealRan</b></a><nav class="menu thin-scrollbar menu_izAj"><ul class="theme-doc-sidebar-menu menu__list"><li class="theme-doc-sidebar-item-category theme-doc-sidebar-item-category-level-1 menu__list-item"><div class="menu__list-item-collapsible"><a class="menu__link menu__link--sublist menu__link--sublist-caret menu__link--active" aria-expanded="true" href="/Docs/Getting Started/overview">Getting Started</a></div><ul style="display:block;overflow:visible;height:auto" class="menu__list"><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link" tabindex="0" href="/Docs/Getting Started/overview">RealRan Overview</a></li><li class="theme-doc-sidebar-item-link theme-doc-sidebar-item-link-level-2 menu__list-item"><a class="menu__link menu__link--active" aria-current="page" tabindex="0" href="/Docs/Getting Started/Get a Random Number">Get a Random Number</a></li></ul></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_FykI"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_DTRl"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_TCnq"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_DM6M"><div class="docItemContainer_vinB"><article><nav class="theme-doc-breadcrumbs breadcrumbsContainer_Xlws" aria-label="breadcrumbs"><ul class="breadcrumbs" itemscope="" itemtype="https://schema.org/BreadcrumbList"><li class="breadcrumbs__item"><a class="breadcrumbs__link" href="/Docs/">üè†</a></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item"><span class="breadcrumbs__link" itemprop="item name">Getting Started</span><meta itemprop="position" content="1"></li><li itemscope="" itemprop="itemListElement" itemtype="https://schema.org/ListItem" class="breadcrumbs__item breadcrumbs__item--active"><span class="breadcrumbs__link" itemprop="item name">Get a Random Number</span><meta itemprop="position" content="2"></li></ul></nav><div class="tocCollapsible_jdIR theme-doc-toc-mobile tocMobile_TmEX"><button type="button" class="clean-btn tocCollapsibleButton_Fzxq">On this page</button></div><div class="theme-doc-markdown markdown"><header><h1>Get a Random Number</h1></header><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="introduction">Introduction<a class="hash-link" href="#introduction" title="Direct link to heading">‚Äã</a></h2><p>PlatON built-in contract (contract address: <code>0x3000000000000000000000000000000000000001</code>) provides a function to generate VRF. The contract supports returning up to 500 random values in a byte array, in which every chunk of 32 bytes represents a random value. To help developers easily use the VRF service, the VRF contract encapsulates calls to the built-in contract and the <code>VRFCoordinator</code> contract also provides pragmatic functions, such as <strong>subscription creation</strong>, <strong>consumer registration</strong>, <strong>synchronous/asynchronous random value generation</strong>, <strong>contract event emitting</strong> and others.  </p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="contract-overview">Contract overview<a class="hash-link" href="#contract-overview" title="Direct link to heading">‚Äã</a></h2><p>The current version is <code>PlatON VRF v1</code>. In this version, the generated random values will not be verified on the chain. Also, developers or consumers need not pay fees for gas consumption of the callback triggered by the <code>VRFCoordinator</code> contract during the asynchronous request of random values. However, the related parameters and implementations are reserved in the contract. When integrating with the version, developers should ignore them first and use default values.  </p><p><img loading="lazy" alt="contracts_overview" src="/Docs/assets/images/contracts_overview-2fac63b52ecff3a0431bd50fded7b6c7.png" width="952" height="156" class="img_E7b_"></p><p>To use PlatON VRF, follow the steps below (Developers could refer to the <code>VRFConsumer.sol</code> sample contract):</p><ol><li>Get the <code>VRFCoordinator</code> address based on the network in the <a href="#Preparation">Preparation section</a> and update the <code>vrfCoordinator</code> address in the  <code>VRFConsumer.col</code>.</li><li>Deploy the <code>VRFConsumer.col</code> contract. This example contract includes the <code>createNewSubscription()</code> function in the <code>constructor()</code> that creates the subscription and adds itself as a consumer automatically when you deploy it.</li><li>Call the <code>syncRequestRandomWords()</code> function in the <code>VRFConsumer.col</code> contract to synchronously get random values.</li><li>Or call the <code>requestRandomWords()</code> function in the <code>VRFConsumer.col</code> contract to asynchronously request random values which are returned via the callback function <code>fulfillRandomWords()</code>.</li></ol><p>One simple example is shown below to demonstrate how to use Remix IDE to deploy the <code>VRFConsumer.sol</code> contract on PlatON and get random values. </p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="preparation">Preparation<a class="hash-link" href="#preparation" title="Direct link to heading">‚Äã</a></h2><ul><li>MetaMask</li><li>The Remix IDE</li><li>PlatON RPC URL:<ul><li>Mainnet: <code>https://openapi2.platon.network/rpc</code></li><li>Devnet: <code>https://devnetopenapi2.platon.network/rpc</code></li></ul></li><li><code>VRFCoordinator</code> contract addressÔºö<ul><li>Mainnet:</li><li>Devnet: <code>0x356d552150f460f57Cd722DC4f3D03A3f2B8386C</code></li></ul></li></ul><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="metamask-setup">MetaMask Setup<a class="hash-link" href="#metamask-setup" title="Direct link to heading">‚Äã</a></h2><p>MetaMask is the most widely used browser plug-in wallet and users can easily interact with PlatON Devnet and Mainnet. see the <a href="https://devdocs.platon.network/docs/en/MetaMask/" target="_blank" rel="noopener noreferrer">MetaMask Configure PlatON/Alaya Network</a> to learn to use it.</p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="deploy-a-vrf-consumer-contract">Deploy a VRF consumer contract<a class="hash-link" href="#deploy-a-vrf-consumer-contract" title="Direct link to heading">‚Äã</a></h2><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="import-vrfcontract-repo">Import VRFContract Repo<a class="hash-link" href="#import-vrfcontract-repo" title="Direct link to heading">‚Äã</a></h3><p>Open <a href="https://remix.ethereum.org/" target="_blank" rel="noopener noreferrer">Remix</a> and import <a href="https://github.com/realran/VRFContract" target="_blank" rel="noopener noreferrer">VRFContract contracts</a></p><p><img loading="lazy" alt="contracts_structure" src="/Docs/assets/images/contracts_structure-470482e8fc74c4d3f52388a8bab26360.png" width="1920" height="930" class="img_E7b_"> </p><p>For this example, use the <code>VRFConsumer.sol</code> sample contract in the sample folder. This contract imports the following dependencies:</p><ul><li><code>VRFCoordinator.sol</code></li><li><code>VRFConsumerBase.sol</code></li></ul><p>The contract also includes pre-configured values for the necessary request parameters such as <code>keyHash</code>, <code>callbackGasLimit</code>, and <code>requestConfirmations</code>. When you deploy your own contract, you can use the same value as provided in the contract. For the parameter <code>vrfCoordinator</code>, You can change its value based on different networks.</p><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="compile-the-vrfconsumersol-contract">Compile the <code>VRFConsumer.sol</code> contract<a class="hash-link" href="#compile-the-vrfconsumersol-contract" title="Direct link to heading">‚Äã</a></h3><p><img loading="lazy" alt="consumer_compile" src="/Docs/assets/images/consumer_compile-f6302a1bc779c5d46f5c4fcf671c4ba2.png" width="1919" height="933" class="img_E7b_"></p><ol><li>Open the <code>VRFConsumer.sol</code> contract in Remix.</li><li>Click the <strong>Solidity compiler</strong> tab on the left sidebar.</li><li>Click the <strong>Compile VRFConsumer.sol</strong> button. Ignore the warnings here.</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="deploy-the-vrfconsumersol-contract">Deploy the <code>VRFConsumer.sol</code> contract<a class="hash-link" href="#deploy-the-vrfconsumersol-contract" title="Direct link to heading">‚Äã</a></h3><p>Before the deployment, please get the <code>VRFCoordinator</code> address based on the network in the <a href="#Preparation">Preparation section</a>. In the <code>VRFConsumer.sol</code> contract, use <strong>Devnet&#x27;s</strong> <code>VRFCoordinator</code> address.</p><p><img loading="lazy" alt="consumer_deploy" src="/Docs/assets/images/consumer_deploy-903e14a5ab6a5f2e0997780c8f3553ad.png" width="1920" height="932" class="img_E7b_"></p><ol><li>On the Remix left sidebar, click the <strong>Deploy &amp; run transactions</strong> tab.</li><li>select the <strong>Injected Web3</strong> Environment.</li><li>Select the <code>VRFConsumer</code> contract and click the <strong>Deploy</strong> button. MetaMask opens and asks you to confirm the transaction.</li></ol><h3 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="request-random-values">Request random values<a class="hash-link" href="#request-random-values" title="Direct link to heading">‚Äã</a></h3><p>The deployed <code>VRFConsumer</code> contract requests random values from <code>VRFCoordinator</code>, receives those values, and stores them in the <code>s_randomWords</code> array. Run the <code>syncRequestRandomWords()</code> function to synchronously request them.</p><ol><li>Request 10 VRF values</li></ol><p><img loading="lazy" alt="consumer_request" src="/Docs/assets/images/consumer_request-d63da8cb503de94e81b45db25bf21a40.png" width="1920" height="929" class="img_E7b_"></p><ol start="2"><li>Get the 10th VRF value at index 9</li></ol><p><img loading="lazy" alt="consumer_ret" src="/Docs/assets/images/consumer_ret-c94993c9094fff7727eeaf3cc86d731c.png" width="1919" height="931" class="img_E7b_"></p><h2 class="anchor anchorWithHideOnScrollNavbar_R0VQ" id="analyze-the-vrfconsumer-contract">Analyze the <code>VRFConsumer</code> contract<a class="hash-link" href="#analyze-the-vrfconsumer-contract" title="Direct link to heading">‚Äã</a></h2><div class="codeBlockContainer_I0IT theme-code-block"><div class="codeBlockContent_wNvx" style="color:#393A34;background-color:#f6f8fa"><pre tabindex="0" class="prism-code language-text codeBlock_jd64 thin-scrollbar"><code class="codeBlockLines_mRuA"><span class="token-line" style="color:#393A34"><span class="token plain">// SPDX-License-Identifier: MIT</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">pragma solidity ^0.8.0;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;../dev/VRFCoordinator.sol&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">import &quot;../VRFConsumerBase.sol&quot;;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">contract VRFConsumer is VRFConsumerBase {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> VRFCoordinator COORDINATOR;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // PlatON DevNet coordinator. </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> address vrfCoordinator = 0x356d552150f460f57Cd722DC4f3D03A3f2B8386C;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // The gas lane to use, which specifies the maximum gas price to bump to.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> bytes32 keyHash = 0xd89b2bf150e3b9e13446986e571fb9cab24b13cea0a43ea20a6049a85cc807cc;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // Your subscription ID.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> uint64 s_subscriptionId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // Depends on the number of requested values that you want sent to the</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // fulfillRandomWords() function. Storing each word costs about 20,000 gas,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // so 100,000 is a safe default for this example contract. Test and adjust</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // this limit based on the network that you select, the size of the request,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // and the processing of the callback request in the fulfillRandomWords()</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // function.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> uint32 callbackGasLimit = 100;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // The default is 3, but you can set this higher.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> uint16 requestConfirmations = 100;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> uint256 public s_requestId;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> address s_owner;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> uint256[] public s_randomWords;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> constructor() VRFConsumerBase(vrfCoordinator) {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   COORDINATOR = VRFCoordinator(vrfCoordinator);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   s_owner = msg.sender;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   //Create a new subscription when you deploy the contract.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   createNewSubscription();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // Create a new subscription when the contract is initially deployed.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> function createNewSubscription() private onlyOwner {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // Create a subscription with a new subscription ID.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   address[] memory consumers = new address[](1);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   consumers[0] = address(this);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   s_subscriptionId = COORDINATOR.createSubscription();</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // Add this contract as a consumer of its own subscription.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   COORDINATOR.addConsumer(s_subscriptionId, consumers[0]);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // Assumes the subscription is funded sufficiently.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> function requestRandomWords(uint32 numWords) external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // Will revert if subscription is not set and funded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   s_requestId = COORDINATOR.requestRandomWords(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     keyHash,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     s_subscriptionId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     requestConfirmations,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     callbackGasLimit,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     numWords</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> // Assumes the subscription is funded sufficiently.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> function syncRequestRandomWords(uint32 numWords) external {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   // Will revert if subscription is not set and funded.</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   uint256[] memory randomWords = COORDINATOR.syncRequestRandomWords(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     keyHash,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     s_subscriptionId,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     requestConfirmations,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     callbackGasLimit,</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">     numWords</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   );</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   s_randomWords = randomWords;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> function fulfillRandomWords(</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   uint256, /* requestId */</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   uint256[] memory randomWords</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> ) internal override {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   s_randomWords = randomWords;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block"></span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> modifier onlyOwner() {</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   require(msg.sender == s_owner);</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">   _;</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain"> }</span><br></span><span class="token-line" style="color:#393A34"><span class="token plain">}</span><br></span></code></pre><button type="button" aria-label="Copy code to clipboard" title="Copy" class="copyButton_eDfN clean-btn"><span class="copyButtonIcons_W9eQ" aria-hidden="true"><svg class="copyButtonIcon_XEyF" viewBox="0 0 24 24"><path d="M19,21H8V7H19M19,5H8A2,2 0 0,0 6,7V21A2,2 0 0,0 8,23H19A2,2 0 0,0 21,21V7A2,2 0 0,0 19,5M16,1H4A2,2 0 0,0 2,3V17H4V3H16V1Z"></path></svg><svg class="copyButtonSuccessIcon_i9w9" viewBox="0 0 24 24"><path d="M21,7L9,19L3.5,13.5L4.91,12.09L9,16.17L19.59,5.59L21,7Z"></path></svg></span></button></div></div><p> In this example, The <code>VRFConsumer</code> contract address is the <code>VRFCoordinator</code> subscription owner and uses that subscription. The consumer contract uses static configuration parameters.</p><p> The contract includes the following parameters:</p><ul><li><code>s_subscriptionId</code>: the subscription ID.</li><li><code>vrfCoordinator</code>: the address of the PlatON VRFCoordinator contract.</li><li><code>s_randomWords</code>: used to store random values.</li></ul><p> The contract includes the following functions:</p><ul><li><code>createNewSubscription()</code>: creates a new subscription and add the consumer itself to the subscription when the contract is initially deployed.</li><li><code>requestRandomWords()</code>: requests random values asynchronously.</li><li><code>fulfillRandomWords()</code>: receives random values and stores them with the contract.</li><li><code>syncRequestRandomWords()</code>: requests random values synchronously.</li></ul></div><footer class="theme-doc-footer docusaurus-mt-lg"><div class="theme-doc-footer-edit-meta-row row"><div class="col"><a href="https://github.com/realran/Docs/tree/main/docs/Getting Started/Get a Random Number.md" target="_blank" rel="noreferrer noopener" class="theme-edit-this-page"><svg fill="currentColor" height="20" width="20" viewBox="0 0 40 40" class="iconEdit_dcUD" aria-hidden="true"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="col lastUpdated_foO9"></div></div></footer></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/Docs/Getting Started/overview"><div class="pagination-nav__sublabel">Previous</div><div class="pagination-nav__label">RealRan Overview</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></div><div class="col col--3"><div class="tableOfContents_cNA8 thin-scrollbar theme-doc-toc-desktop"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#introduction" class="table-of-contents__link toc-highlight">Introduction</a></li><li><a href="#contract-overview" class="table-of-contents__link toc-highlight">Contract overview</a></li><li><a href="#preparation" class="table-of-contents__link toc-highlight">Preparation</a></li><li><a href="#metamask-setup" class="table-of-contents__link toc-highlight">MetaMask Setup</a></li><li><a href="#deploy-a-vrf-consumer-contract" class="table-of-contents__link toc-highlight">Deploy a VRF consumer contract</a><ul><li><a href="#import-vrfcontract-repo" class="table-of-contents__link toc-highlight">Import VRFContract Repo</a></li><li><a href="#compile-the-vrfconsumersol-contract" class="table-of-contents__link toc-highlight">Compile the <code>VRFConsumer.sol</code> contract</a></li><li><a href="#deploy-the-vrfconsumersol-contract" class="table-of-contents__link toc-highlight">Deploy the <code>VRFConsumer.sol</code> contract</a></li><li><a href="#request-random-values" class="table-of-contents__link toc-highlight">Request random values</a></li></ul></li><li><a href="#analyze-the-vrfconsumer-contract" class="table-of-contents__link toc-highlight">Analyze the <code>VRFConsumer</code> contract</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container container-fluid"><div class="row footer__links"><div class="col footer__col"><div class="footer__title">Docs</div><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/Docs/">Tutorial</a></li></ul></div><div class="col footer__col"><div class="footer__title">More</div><ul class="footer__items"><li class="footer__item"><a href="https://github.com/realran/Docs" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub<svg width="13.5" height="13.5" aria-hidden="true" viewBox="0 0 24 24" class="iconExternalLink_I5OW"><path fill="currentColor" d="M21 13v10h-21v-19h12v2h-10v15h17v-8h2zm3-12h-10.988l4.035 4-6.977 7.07 2.828 2.828 6.977-7.07 4.125 4.172v-11z"></path></svg></a></li></ul></div></div><div class="footer__bottom text--center"><div class="footer__copyright">Copyright ¬© 2022 RealRan, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/Docs/assets/js/runtime~main.c1293670.js"></script>
<script src="/Docs/assets/js/main.1d2ab322.js"></script>
</body>
</html>